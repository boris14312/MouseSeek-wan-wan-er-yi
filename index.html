<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mouseseek Chat</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-size: calc(12px + 0.5vw);
        }

        body {
            height: 100vh;
            display: flex;
            flex-direction: column;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f4f4;
            overflow: hidden;
        }

        /* VIP å……å€¼ç•Œé¢ï¼ˆé»˜è®¤éšè—ï¼‰ */
        #vipScreen {
            position: absolute;
            width: 100%;
            height: 100vh;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
            transition: opacity 0.5s ease;
        }

        #vipScreen h1 {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            color: #ffd700;
        }

        .vip-options {
            display: flex;
            gap: 1.5rem;
        }

        .vip-option {
            padding: 1.2rem 2.5rem;
            font-size: 1.2rem;
            background: #ffd700;
            color: #333;
            border: none;
            border-radius: 2rem;
            cursor: pointer;
            transition: background 0.3s ease, transform 0.2s ease;
        }

        .vip-option:hover {
            background: #ffcc00;
            transform: scale(1.05);
        }

        /* æ–°å¯¼èˆªæ æ ·å¼ */
        #navbar { 
            width: 100%; 
            display: flex; 
            align-items: center; 
            justify-content: space-between; 
            background: #333; 
            padding: 1vw 2vw; 
            box-sizing: border-box; 
            position: fixed; 
            top: 0; 
            left: 0; 
            z-index: 1000; 
        }

        #navbar .logo { 
            width: 3em; 
            height: 3em; 
            border-radius: 50%; /* å¦‚æœå›¾ç‰‡æ˜¯åœ†å½¢ï¼Œå¯ä»¥ä¿ç•™ */
            object-fit: cover; /* ç¡®ä¿å›¾ç‰‡æ¯”ä¾‹æ­£ç¡® */
        }

        #navbar .title { 
            color: white; 
            font-size: 1.5em; 
            font-weight: bold; 
            margin-left: 1vw; 
            text-decoration: none; /* å»æ‰ä¸‹åˆ’çº¿ */
        }

        #navbar .nav-links { 
            display: flex; 
            gap: 2vw; 
        }

        #navbar .nav-links a { 
            color: white; 
            text-decoration: none; 
            font-size: 1.2em; 
            transition: color 0.3s ease;
        }

        #navbar .nav-links a:hover { 
            color: #ffd700; 
        }

        /* ä¸»ç•Œé¢ */
        #chatbox {
            flex: 1;
            width: 100%;
            max-width: 600px;
            margin: auto;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            gap: 1rem;
            overflow: hidden;
            margin-top: 80px; /* ç•™å‡ºç©ºé—´é¿å…è¢«å¯¼èˆªæ é®æŒ¡ */
        }

        .message {
            display: inline-block;
            padding: 0.8rem;
            border-radius: 0.8rem;
            font-size: 1.2rem;
            max-width: 80%;
            word-wrap: break-word;
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .user {
            align-self: flex-end;
            background-color: #007bff;
            color: white;
        }

        .bot {
            align-self: flex-start;
            background-color: #e0e0e0;
            color: black;
        }

        #inputBox {
            flex: 0 0 10%;
            width: 100%;
            display: flex;
            gap: 1vw;
            padding: 1rem;
            background: white;
            box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.1);
        }

        input {
            flex: 1;
            padding: 0.8rem;
            border: 1px solid #ccc;
            border-radius: 2rem;
            font-size: 1.2rem;
            outline: none;
            transition: border-color 0.3s ease;
        }

        input:focus {
            border-color: #007bff;
        }

        button {
            padding: 0.8rem 1.2rem;
            border: none;
            background: #007bff;
            color: white;
            border-radius: 2rem;
            cursor: pointer;
            font-size: 1.2rem;
            transition: background 0.3s ease, transform 0.2s ease;
        }

        button:hover {
            background: #0056b3;
            transform: scale(1.05);
        }

        /* å†…å®¹åŒºåŸŸ */
        #content {
            width: 90vw;
            max-width: 600px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-top: 70px; /* ç»™å†…å®¹åŒºåŸŸé¡¶éƒ¨ç•™å‡ºç©ºé—´ï¼Œé¿å…è¢«å¯¼èˆªæ é®æŒ¡ */
        }

        #chatImage {
            width: 100%;
            max-width: 400px;
            height: auto;
            margin-bottom: 20px; /* åœ¨å›¾ç‰‡å’Œæ­£æ–‡ä¹‹é—´æ·»åŠ ä¸€äº›ç©ºéš™ */
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        #chatTitle { 
            font-size: 1.8em; 
            font-weight: bold; 
            margin-top: 1vw; 
            color: #333;
        }

        #chatDescription { 
            font-size: 1.2em; 
            text-align: justify; /* ä½¿æ–‡æœ¬ä¸¤ç«¯å¯¹é½ */
            margin-top: 1vw; 
            padding: 0 10px; /* æ·»åŠ å†…è¾¹è·ï¼Œé¿å…æ–‡å­—é è¿‘è¾¹ç¼˜ */
            color: #555;
        }
    </style>
</head>
<body>

    <!-- VIP å……å€¼ç•Œé¢ -->
    <div id="vipScreen">
        <h1>è¯·é€‰æ‹©æ‚¨çš„é¼ æ°‘å……å€¼</h1>
        <div class="vip-options">
            <button class="vip-option" onclick="unlockChat('6ä¸ªè€é¼ ')">6ä¸ªè€é¼ </button>
            <button class="vip-option" onclick="unlockChat('648ä¸ªè€é¼ ')">648ä¸ªè€é¼ </button>
            <button class="vip-option" onclick="unlockChat('é¼ ç‹')">é¼ ç‹</button>
        </div>
    </div>

    <!-- æ–°å¯¼èˆªæ  -->
    <nav id="navbar">
        <div style="display: flex; align-items: center;">
            <a href="index.html">
                <img src="./logo.png" class="logo" alt="MouseSeek Logo">
            </a>
            <a href="index.html" class="title">MouseSeek</a>
        </div>
        <div class="nav-links">
            <a href="./about.html">å…³äºæˆ‘ä»¬</a>
            <a href="./support.html">è”ç³»æ–¹å¼</a>
        </div>
    </nav>
    
    <div id="chatbox"></div>

    <div id="inputBox">
        <input type="text" id="userInput" placeholder="è¾“å…¥æ¶ˆæ¯...">
        <button onclick="prepareSendMessage()">å‘é€</button>
    </div>

    <script>
        let hasPaid = false;
        let pendingMessage = "";

        const API_KEY = "sk-4c30dded35cc4a688719bd2503f29772";  // è¿™é‡Œå¡«å…¥ä½ çš„ DeepSeek API Key

        // å‘é€æ¶ˆæ¯æ—¶ï¼Œå…ˆæ£€æŸ¥æ˜¯å¦å·²ä»˜è´¹
        async function prepareSendMessage() {
            const inputField = document.getElementById("userInput");
            const message = inputField.value.trim();
            if (!message) return;

            // å¦‚æœå·²ä»˜è´¹ï¼Œç›´æ¥å‘é€æ¶ˆæ¯å¹¶è·å–å›å¤
            if (hasPaid) {
                sendMessage(message);
            } else {
                pendingMessage = message;
                // å¦‚æœæœªä»˜è´¹ï¼Œæ˜¾ç¤ºVIPå……å€¼ç•Œé¢
                document.getElementById("vipScreen").style.display = "flex";
            }
        }

        // é€‰æ‹© VIP åè§£é”èŠå¤©ï¼Œå¹¶å‘é€ä¹‹å‰è¾“å…¥çš„æ¶ˆæ¯
        function unlockChat(option) {
            hasPaid = true;
            document.getElementById("vipScreen").style.opacity = "0";
            setTimeout(() => document.getElementById("vipScreen").style.display = "none", 500);

            // ç»™å‡ºæç¤º
            const chatbox = document.getElementById("chatbox");
            chatbox.innerHTML += `<div class='message bot'>æ‚¨å·²é€‰æ‹© "${option}"ï¼Œå¼€å§‹èŠå¤©å§ï¼</div>`;

            // å‘é€ä¹‹å‰è¾“å…¥çš„æ¶ˆæ¯
            sendMessage(pendingMessage);
        }

        // å‘é€æ¶ˆæ¯å¹¶è·å– AI å›å¤
        async function sendMessage(message) {
            const chatbox = document.getElementById("chatbox");
            
            // æ˜¾ç¤ºç”¨æˆ·æ¶ˆæ¯
            chatbox.innerHTML += `<div class='message user'>${message}</div>`;
            
            const inputField = document.getElementById("userInput");
            inputField.value = "";
            pendingMessage = "";

            // è·å– DeepSeek å›å¤
            const botReply = await getBotReply(message);

            // æ˜¾ç¤º AI å›å¤
            chatbox.innerHTML += `<div class='message bot'>${botReply}</div>`;

            // æ»šåŠ¨åˆ°åº•éƒ¨
            chatbox.scrollTop = chatbox.scrollHeight;
        }

        // è°ƒç”¨ DeepSeek API è·å–å›å¤
        async function getBotReply(userMessage) {
            const apiUrl = "https://api.deepseek.com/v1/chat/completions";  // DeepSeek çš„ API URL
            const requestBody = {
                model: "deepseek-chat",  // ä½¿ç”¨ DeepSeek çš„æ¨¡å‹
                messages: [{ role: "user", content: userMessage }],
                temperature: 0.7
            };

            try {
                const response = await fetch(apiUrl, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "Authorization": `Bearer ${API_KEY}`
                    },
                    body: JSON.stringify(requestBody)
                });

                const data = await response.json();

                // æ£€æŸ¥ API è¿”å›çš„æ•°æ®
                if (response.ok && data.choices && data.choices.length > 0) {
                    return data.choices[0].message.content.trim();  // è¿”å› AI ç”Ÿæˆçš„å›å¤
                } else {
                    return "é¼ é¼ ä»¬ç ´äº§äº†ğŸ˜­ğŸ˜­ğŸ˜­";
                }
            } catch (error) {
                console.error("Error:", error);
                return "æŠ±æ­‰ï¼Œé¼ é¼ ä»¬æ— æ³•å¤„ç†æ‚¨çš„è¯·æ±‚ã€‚";
            }
        }
    </script>
</body>
</html>
